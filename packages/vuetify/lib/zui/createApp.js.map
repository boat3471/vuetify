{"version":3,"sources":["../../src/zui/createApp.ts"],"names":[],"mappings":"AAAA,OAAO,GAAP,MAA4D,KAA5D;AAEA,SAAS,YAAT,QAA6B,WAA7B;AACA,SAAS,YAAT,QAA6B,WAA7B;AACA,SAAS,SAAT,QAA0B,aAA1B;AACA,SAAS,IAAT,QAAqB,yBAArB;AAEA;;;;AAGA,SAAS,UAAT,CACE,CADF,EAEE,OAFF,EAGE,OAHF,EAIE,OAJF,EAKE,kBAAkB,GAAG,KALvB,EAK4B;AAE1B,EAAA,OAAO,GAAG,OAAO,IAAI,EAArB;AACA,QAAM,QAAQ,GAAU,kBAAkB,GACtC,CAAC,CAAC,YAAD,CADqC,GAEtC,OAAO,GAAG,CAAC,CAAC,OAAD,CAAJ,GAAgB,CAAC,CAAC,EAAD,CAF5B;AAGA,SAAO,CAAC,CAAC,OAAO,IAAI,IAAZ,EAAkB;AACxB,IAAA,WAAW,EAAE,SAAS,OAAO,CAAC,QAAR,IAAoB,EAAE,EADpB;AAExB,IAAA,KAAK,EAAE;AACL,MAAA,EAAE,EAAE,OAAO,CAAC,KAAR,IAAiB;AADhB;AAFiB,GAAlB,EAKL,CAAC,QAAD,CALK,CAAR;AAMD;AAED;;;;;;AAIA,OAAM,SAAU,SAAV,CAAqB,OAArB,EAA8C;AAClD,EAAA,OAAO,GAAG,OAAO,IAAI,EAArB;AAEA,EAAA,YAAY,CAAC,IAAb,GAAoB,KAApB,CAHkD,CAKlD;;AACA,EAAA,GAAG,CAAC,GAAJ,CAAQ,YAAR,EAAsB,OAAtB;AAEA,QAAM;AAAE,IAAA;AAAF,MAAa,YAAY,CAAC,WAAb,EAAnB;AACA,QAAM,aAAa,GAAG,MAAM,CAAC,gBAAP,CAAwB,OAAO,CAAC,aAAhC,CAAtB;AACA,QAAM,EAAE,GAAG,SAAS,CAAC,aAAD,EAAgB,OAAO,CAAC,UAAxB,CAApB;AACA,EAAA,YAAY,CAAC,cAAb,CAA4B,EAAE,CAAC,SAA/B;AAEA,QAAM,gBAAgB,GAA0B,OAAO,CAAC,gBAAR,IAA4B,EAA5E;AAEA,QAAM,SAAS,GAAG,YAAY,CAAC,SAA/B;AAEA,MAAI,OAAJ;AACA,MAAI,OAAJ;AACA,MAAI,kBAAkB,GAAG,KAAzB;;AAEA,MAAI,SAAJ,EAAe;AACb,IAAA,OAAO,GAAG,SAAS,CAAC,OAApB;AACA,IAAA,OAAO,GAAG,SAAS,CAAC,OAApB;AACA,IAAA,kBAAkB,GAAG,SAAS,CAAC,kBAA/B;AACD,GAzBiD,CA2BlD;;;AACA,MAAI,gBAAgB,CAAC,MAArB,EAA6B;AAC3B,IAAA,YAAY,CAAC,MAAb,GAAsB,gBAAgB,CAAC,MAAvC;AACD,GAFD,MAEO;AACL,IAAA,OAAO,GAAG,OAAO,CAAC,OAAlB;AACA,IAAA,OAAO,GAAG,OAAO,CAAC,OAAlB;AACA,IAAA,kBAAkB,GAAG,KAArB;AACD,GAlCiD,CAoClD;;;AACA,EAAA,OAAO,GAAG,OAAO,IAAI,OAAO,CAAC,OAA7B;AACA,EAAA,OAAO,GAAG,OAAO,IAAI,OAAO,CAAC,OAA7B;AAEA,EAAA,YAAY,CAAC,IAAb,GAAoB,IAAI,GAAJ,CAAQ;AAC1B,IAAA,EAAE,EAAE,OAAO,CAAC,KAAR,IAAiB,MADK;AAE1B,IAAA,OAAO,EAAE,EAFiB;;AAG1B,IAAA,MAAM,CAAE,aAAF,EAAe;AACnB,aAAO,UAAU,CAAC,aAAD,EAAgB,OAAhB,EAAyB,OAAzB,EAAkC,OAAlC,EAA2C,kBAA3C,CAAjB;AACD,KALyB;;AAM1B,OAAG;AANuB,GAAR,CAApB;AAQA,SAAO,YAAY,CAAC,IAApB;AACD","sourcesContent":["import Vue, { ComponentOptions, CreateElement, VNode } from 'vue'\nimport { CreateAppOptions, RouteComponent, Zui } from '../../types'\nimport { ZuiCoreClass } from './ZuiCore'\nimport { ZRouterClass } from './ZRouter'\nimport { createZui } from './createZui'\nimport { ZApp } from '../components/VApp/ZApp'\n\n/**\n * 创建主程序\n */\nfunction createMain (\n  h: CreateElement,\n  options: CreateAppOptions,\n  appMain?: RouteComponent,\n  appHome?: RouteComponent,\n  isRenderRouterView = false\n) {\n  options = options || {}\n  const children: VNode = isRenderRouterView\n    ? h('RouterView')\n    : appHome ? h(appHome) : h('')\n  return h(appMain || ZApp, {\n    staticClass: `z-app ${options.appClass || ''}`,\n    props: {\n      id: options.appId || 'app',\n    },\n  }, [children])\n}\n\n/**\n * 创建APP, 基于@zwd/z-ui\n * @param options\n */\nexport function createApp (options: CreateAppOptions): Vue {\n  options = options || {}\n\n  ZuiCoreClass.type = 'app'\n\n  // 安装 zui-core\n  Vue.use(ZuiCoreClass, options)\n\n  const { $theme } = ZuiCoreClass.genInstance()\n  const presetOptions = $theme.getDefaultPreset(options.presetOptions)\n  const ui = createZui(presetOptions, options.useOptions)\n  ZuiCoreClass.settingVuetify(ui.framework)\n\n  const componentOptions: ComponentOptions<any> = options.componentOptions || {}\n\n  const appRouter = ZRouterClass.appRouter\n\n  let appMain: RouteComponent | undefined\n  let appHome: RouteComponent | undefined\n  let isRenderRouterView = false\n\n  if (appRouter) {\n    appMain = appRouter.appMain\n    appHome = appRouter.appHome\n    isRenderRouterView = appRouter.isRenderRouterView\n  }\n\n  // 如果用户传了自定义的 router\n  if (componentOptions.router) {\n    ZRouterClass.router = componentOptions.router\n  } else {\n    appMain = options.appMain\n    appHome = options.appHome\n    isRenderRouterView = false\n  }\n\n  // 如果存在路由，但未设置appMain和appHome，则使用options中的配置；\n  appMain = appMain || options.appMain\n  appHome = appHome || options.appHome\n\n  ZuiCoreClass.$app = new Vue({\n    el: options.appId || '#app',\n    vuetify: ui as unknown as Zui,\n    render (createElement) {\n      return createMain(createElement, options, appMain, appHome, isRenderRouterView)\n    },\n    ...componentOptions,\n  })\n  return ZuiCoreClass.$app\n}\n"],"sourceRoot":"","file":"createApp.js"}