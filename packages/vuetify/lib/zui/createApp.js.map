{"version":3,"sources":["../../src/zui/createApp.ts"],"names":[],"mappings":"AAAA,OAAO,GAAP,MAA4D,KAA5D;AAEA,SAAS,IAAT,QAAqB,eAArB;AACA,SAAS,YAAT,QAA6B,WAA7B;AACA,SAAS,YAAT,QAA6B,WAA7B;AACA,SAAS,SAAT,QAA0B,aAA1B;AAEA;;;;;;AAKA,SAAS,UAAT,CAAqB,aAArB,EAAmD,OAAnD,EAA4E;AAC1E,EAAA,OAAO,GAAG,OAAO,IAAI,EAArB;AACA,QAAM,QAAQ,GAAY,EAA1B;AACA,QAAM,OAAO,GAAG,OAAO,CAAC,OAAR,GAAkB,aAAa,CAAC,OAAO,CAAC,OAAT,CAA/B,GAAmD,IAAnE;;AACA,MAAI,CAAC,OAAL,EAAc;AACZ,QAAI,OAAO,CAAC,gBAAR,IAA4B,OAAO,CAAC,gBAAR,CAAyB,MAAzD,EAAiE;AAC/D,MAAA,QAAQ,CAAC,IAAT,CAAc,aAAa,CAAC,GAAG,CAAC,SAAJ,CAAc,YAAd,CAAD,CAA3B;AACD;AACF,GAJD,MAIO;AACL,IAAA,QAAQ,CAAC,IAAT,CAAc,OAAd;AACD;;AACD,SAAO,aAAa,EAClB;AACA,EAAA,OAAO,CAAC,OAAR,IAAmB,IAFD,EAGlB;AACA;AACE,IAAA,WAAW,EAAE,SAAS,OAAO,CAAC,QAAR,IAAoB,EAAE,EAD9C;AAEE,IAAA,KAAK,EAAE;AACL,MAAA,EAAE,EAAE,OAAO,CAAC,KAAR,IAAiB;AADhB;AAFT,GAJkB,EAUlB;AACA,EAAA,QAXkB,CAApB;AAaD;AAED;;;;;;AAIA,OAAM,SAAU,SAAV,CAAqB,OAArB,EAA8C;AAClD,MAAI,CAAC,OAAL,EAAc;AACZ,IAAA,OAAO,GAAG,OAAO,IAAI,EAArB;AACD,GAHiD,CAKlD;;;AACA,EAAA,GAAG,CAAC,GAAJ,CAAQ,YAAR,EAAsB,OAAtB;AAEA,QAAM;AAAE,IAAA;AAAF,MAAa,YAAY,CAAC,WAAb,EAAnB;AACA,QAAM,aAAa,GAAG,MAAM,CAAC,gBAAP,CAAwB,OAAO,CAAC,aAAhC,CAAtB;AACA,QAAM,gBAAgB,GAA0B,OAAO,CAAC,gBAAR,IAA4B,EAA5E;AACA,QAAM,EAAE,GAAG,SAAS,CAAC,aAAD,EAAgB,OAAO,CAAC,UAAxB,CAApB;AACA,EAAA,gBAAgB,CAAC,MAAjB,KAA4B,YAAY,CAAC,MAAb,GAAsB,gBAAgB,CAAC,MAAnE;AACA,EAAA,YAAY,CAAC,cAAb,CAA4B,EAAE,CAAC,SAA/B;AACA,EAAA,YAAY,CAAC,IAAb,GAAoB,IAAI,GAAJ,CAAQ;AAC1B,IAAA,EAAE,EAAE,OAAO,CAAC,KAAR,IAAiB,MADK;AAE1B,IAAA,OAAO,EAAE,EAFiB;;AAG1B,IAAA,MAAM,CAAE,aAAF,EAAe;AACnB,aAAO,UAAU,CAAC,aAAD,EAAgB,OAAhB,CAAjB;AACD,KALyB;;AAM1B,OAAG;AANuB,GAAR,CAApB;AAQA,SAAO,YAAY,CAAC,IAApB;AACD","sourcesContent":["import Vue, { ComponentOptions, CreateElement, VNode } from 'vue'\nimport { CreateAppOptions, Zui } from '../../types'\nimport { ZApp } from '../components'\nimport { ZuiCoreClass } from './ZuiCore'\nimport { ZRouterClass } from './ZRouter'\nimport { createZui } from './createZui'\n\n/**\n * 创建主程序\n * @param createElement\n * @param options\n */\nfunction createMain (createElement: CreateElement, options: CreateAppOptions) {\n  options = options || {}\n  const children: VNode[] = []\n  const appHome = options.appHome ? createElement(options.appHome) : null\n  if (!appHome) {\n    if (options.componentOptions && options.componentOptions.router) {\n      children.push(createElement(Vue.component('RouterView')))\n    }\n  } else {\n    children.push(appHome)\n  }\n  return createElement(\n    // 主视图\n    options.appMain || ZApp,\n    // 主视图配置选项\n    {\n      staticClass: `z-app ${options.appClass || ''}`,\n      props: {\n        id: options.appId || 'app',\n      },\n    },\n    // 子元素列表\n    children,\n  )\n}\n\n/**\n * 创建APP, 基于@zwd/z-ui\n * @param options\n */\nexport function createApp (options: CreateAppOptions): Vue {\n  if (!options) {\n    options = options || {}\n  }\n\n  // 安装 zui-core\n  Vue.use(ZuiCoreClass, options)\n\n  const { $theme } = ZuiCoreClass.genInstance()\n  const presetOptions = $theme.getDefaultPreset(options.presetOptions)\n  const componentOptions: ComponentOptions<any> = options.componentOptions || {}\n  const ui = createZui(presetOptions, options.useOptions)\n  componentOptions.router && (ZRouterClass.router = componentOptions.router)\n  ZuiCoreClass.settingVuetify(ui.framework)\n  ZuiCoreClass.$app = new Vue({\n    el: options.appId || '#app',\n    vuetify: ui as unknown as Zui,\n    render (createElement) {\n      return createMain(createElement, options)\n    },\n    ...componentOptions,\n  })\n  return ZuiCoreClass.$app\n}\n"],"sourceRoot":"","file":"createApp.js"}