{"version":3,"sources":["../../src/zui/ZuiCore.ts"],"names":[],"mappings":"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","sourcesContent":["import Vue, { VueConstructor } from 'vue'\nimport * as directives from './directives'\nimport {\n  ZuiOptions,\n  ZuiCoreDescription,\n  ZMenuOption, CreateAdminOptions,\n} from '../../types'\nimport { UIEvent } from './events/UIEvent'\nimport { ZMenuClass } from './ZMenu'\nimport { ZRouterClass } from './ZRouter'\nimport { ZThemeClass } from './ZTheme'\nimport { ZModalClass } from './ZModal'\nimport { ZMessageClass } from './ZMessage'\nimport { ZAuthClass } from './ZAuth'\nimport debug from './util/debug'\n\nlet instance: ZuiCoreClass\n\nexport class ZuiCoreClass extends UIEvent implements ZuiCoreDescription {\n  static type: 'app' | 'admin' | '' = '';\n  static initialized = false;\n  static callbackList: Function[] = [];\n  static readyCheck (): void {\n    if (!ZuiCoreClass.initialized) {\n      window.console.warn('Zui is not initialized! Please use $zui.ready(callback) and call when ready')\n    }\n  }\n\n  constructor (options?: ZuiOptions) {\n    super()\n    if (!instance) {\n      instance = this\n      ZuiCoreClass.setting(options)\n      this.on('ready', () => {\n        ZuiCoreClass.initialized = true\n        if (ZuiCoreClass.callbackList) {\n          ZuiCoreClass.callbackList.forEach(fn => {\n            fn()\n          })\n          ZuiCoreClass.callbackList = []\n        }\n      })\n    }\n    return instance\n  }\n\n  ready (callback: () => void): void {\n    ZuiCoreClass.callbackList.push(callback)\n  }\n\n  get $menu (): ZMenuClass {\n    return ZMenuClass.genInstance()\n  }\n\n  get $router (): ZRouterClass {\n    return ZRouterClass.genInstance()\n  }\n\n  get $theme (): ZThemeClass {\n    return ZuiCoreClass.$theme\n  }\n\n  get $modal (): ZModalClass {\n    return ZModalClass.genInstance()\n  }\n\n  get $message (): ZMessageClass {\n    return ZMessageClass.genInstance()\n  }\n\n  get $auth (): ZAuthClass {\n    return ZAuthClass.genInstance()\n  }\n\n  /**\n   * App名称\n   */\n  get appName () {\n    return ZuiCoreClass.$options.appName || ''\n  }\n\n  /**\n   * App唯一标示\n   */\n  get appKey () {\n    return ZuiCoreClass.$options.appKey || ''\n  }\n\n  /**\n   * App编号\n   */\n  get appId () {\n    return ZuiCoreClass.$options.appId || ''\n  }\n\n  /**\n   * App 重定向路径\n   */\n  get appRedirect (): string {\n    return (ZuiCoreClass.$options as CreateAdminOptions).redirect || ''\n  }\n\n  /**\n   * 获取主菜单列表\n   */\n  get menus (): ZMenuOption[] {\n    return ZMenuClass.__menusData\n  }\n\n  /**\n   * 获取默认主题状态\n   */\n  get darkStatus (): boolean {\n    return this.$theme.darkStatus || false\n  }\n\n  /**\n   * 获取默认主题大小\n   */\n  get defaultSize (): string {\n    return ZuiCoreClass.$options.defaultSize || 's'\n  }\n\n  /**\n   * 获取默认主题大小\n   */\n  get defaultDense (): boolean {\n    return ZuiCoreClass.$options.defaultDense === true\n  }\n\n  /**\n   * 获取默认的提示背景色\n   */\n  get defaultTooltipColor (): string {\n    return ZuiCoreClass.$options.defaultTooltipColor || '#616161'\n  }\n\n  /**\n   * 获取默认的提示背景色\n   */\n  get defaultTooltipSize (): string {\n    return ZuiCoreClass.$options.defaultTooltipSize || 's'\n  }\n\n  /**\n   * 回到首页\n   */\n  openHome () {\n    const { openHome } = ZuiCoreClass.$options as any\n\n    if (openHome) {\n      openHome()\n      return true\n    } else {\n      let type = ''\n      switch (ZuiCoreClass.type) {\n        case 'app':\n          type = 'createApp'\n          break\n        case 'admin':\n          type = 'createAdmin'\n          break\n      }\n      debug.warn(`请在 ${type} 中配置 openHome，实现重定向跳转！`)\n    }\n    return false\n  }\n\n  /**\n   * 回到登录页面\n   */\n  openLogin () {\n    const { openLogin } = ZuiCoreClass.$options as any\n\n    if (openLogin) {\n      openLogin()\n    }\n  }\n\n  static $app: Vue;\n\n  /** @internal */\n  static $vuetifyInstalled = false;\n\n  /** @internal */\n  static $vuetify: any = {\n    theme: {\n      dark: true,\n    },\n  };\n\n  /** @internal */\n  static $options: ZuiOptions = {};\n\n  /** @internal */\n  static $theme: ZThemeClass;\n\n  static settingVuetify (vuetify: any) {\n    ZuiCoreClass.$vuetify = vuetify\n    ZuiCoreClass.$vuetifyInstalled = true\n    ZThemeClass.settingVuetify(vuetify)\n  }\n\n  static setting (options?: ZuiOptions) {\n    if (options) {\n      ZuiCoreClass.$options = options\n      ZuiCoreClass.$theme = new ZThemeClass(options.appKey || '', {\n        mainMenuWidth: (options as CreateAdminOptions).defaultMenuWidth,\n        denseMode: (options as CreateAdminOptions).defaultDense,\n      })\n      ZMessageClass.appId = options.appId || 'app'\n    }\n  }\n\n  static genInstance (): ZuiCoreClass {\n    if (!instance) {\n      instance = new ZuiCoreClass()\n    }\n    return instance\n  }\n\n  static install (Vue: VueConstructor, options: ZuiOptions) {\n    ZuiCoreClass.setting(options)\n    const core = ZuiCoreClass.genInstance()\n\n    if (!(ZuiCoreClass.install as any).initialized) {\n      (ZuiCoreClass.install as any).initialized = true\n    }\n\n    // 安装Zui指令\n    Object.keys(directives).forEach(name => {\n      Vue.directive(name, (directives as any)[name])\n    })\n\n    Vue.mixin({\n      beforeCreate () {\n        const $options = this.$options\n\n        // 安装 ZuiCore\n        if (!this.$ui) {\n          this.$ui = core\n        } else {\n          $options.parent && (this.$ui = $options.parent.$ui)\n        }\n\n        // 安装 ZModal\n        if (!this.$modal) {\n          this.$modal = core.$modal\n        } else {\n          $options.parent && (this.$modal = $options.parent.$modal)\n        }\n\n        // 安装 ZMessage\n        if (!this.$message) {\n          this.$message = core.$message\n        } else {\n          $options.parent && (this.$message = $options.parent.$message)\n        }\n\n        // 安装 ZMenu\n        if (!this.$menu) {\n          this.$menu = core.$menu\n        } else {\n          $options.parent && (this.$menu = $options.parent.$menu)\n        }\n\n        // 安装 ZTheme\n        if (!this.$theme) {\n          this.$theme = core.$theme\n          this.$themeStore = core.$theme.themeStore\n        } else {\n          $options.parent && (this.$theme = $options.parent.$theme)\n        }\n      },\n    })\n  }\n}\n"],"sourceRoot":"","file":"ZuiCore.js"}