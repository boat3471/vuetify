{"version":3,"sources":["../../src/zui/createAdmin.ts"],"names":[],"mappings":"AAAA,OAAO,GAAP,MAAqD,KAArD;AACA,OAAO,SAAP,MAAsB,YAAtB;AACA,SAAS,SAAT,QAA0B,qBAA1B;AAGA,SAAS,YAAT,QAA6B,WAA7B;AACA,SAAS,SAAT,QAA0B,aAA1B;AACA,SAAS,YAAT,QAA6B,WAA7B;AAEA;;;;;AAIA,SAAS,UAAT,CAAqB,CAArB,EAAuC,OAAvC,EAAoE,OAApE,EAA4F;AAC1F,SAAO,CAAC,CAAC,SAAD,EAAY;AAClB,IAAA,WAAW,EAAE,SAAS,OAAO,CAAC,QAAR,IAAoB,EAAE,EAD1B;AAElB,IAAA,KAAK,EAAE;AACL,MAAA,EAAE,EAAE,OAAO,CAAC,KAAR,IAAiB;AADhB;AAFW,GAAZ,EAMR;AACA,GAAC,OAAO,GAAG,CAAC,CAAC,OAAD,CAAJ,GAAgB,EAAxB,CAPQ,CAAR;AASD;AAED;;;;;;AAIA,OAAM,SAAU,WAAV,CAAuB,OAAvB,EAAkD;AACtD,EAAA,OAAO,GAAG,OAAO,IAAI,EAArB,CADsD,CAGtD;;AACA,EAAA,GAAG,CAAC,GAAJ,CAAQ,SAAR,EAJsD,CAMtD;;AACA,EAAA,GAAG,CAAC,GAAJ,CAAQ,YAAR,EAAsB,OAAtB;AAEA,QAAM;AAAE,IAAA,KAAF;AAAS,IAAA,MAAT;AAAiB,IAAA;AAAjB,MAA2B,YAAY,CAAC,WAAb,EAAjC,CATsD,CAWtD;;AACA,EAAA,KAAK,CAAC,OAAN,CAAc,OAAO,CAAC,IAAR,IAAgB,EAA9B,EAZsD,CActD;;AACA,EAAA,KAAK,CAAC,YAAN,CAAmB,OAAO,CAAC,KAAR,IAAiB,EAApC,EAAwC,KAAxC,EAfsD,CAiBtD;;AACA,QAAM,aAAa,GAAG,MAAM,CAAC,gBAAP,CAAwB,OAAO,CAAC,aAAhC,CAAtB;AACA,QAAM,EAAE,GAAG,SAAS,CAAC,aAAD,EAAgB,OAAO,CAAC,UAAxB,CAApB;AACA,EAAA,YAAY,CAAC,cAAb,CAA4B,EAAE,CAAC,SAA/B;AAEA,QAAM,gBAAgB,GAA0B,OAAO,CAAC,gBAAR,IAA4B,EAA5E;AAEA,QAAM,WAAW,GAAG,YAAY,CAAC,WAAb,IAA4B,YAAY,CAAC,cAAb,CAA4B;AAC1E,IAAA,OAAO,EAAE,OAAO,CAAC,OADyD;AAE1E,IAAA,OAAO,EAAE,OAAO,CAAC;AAFyD,GAA5B,CAAhD;AAKA,MAAI,MAAM,GAAG,gBAAgB,CAAC,MAA9B;AACA,MAAI,OAAJ;;AAEA,MAAI,WAAJ,EAAiB;AACf,IAAA,MAAM,GAAG,WAAW,CAAC,SAAZ,EAAT;AACA,IAAA,OAAO,GAAG,WAAW,CAAC,OAAtB;AACD;;AAED,MAAI,MAAJ,EAAY;AACV,IAAA,gBAAgB,CAAC,MAAjB,GAA0B,MAA1B;AACA,IAAA,YAAY,CAAC,MAAb,GAAsB,MAAtB;AACD,GAxCqD,CA0CtD;;;AACA,QAAM,UAAU,GAA0B;AACxC,IAAA,EAAE,EAAE,OAAO,CAAC,KAAR,IAAiB,MADmB;AAExC,IAAA,OAAO,EAAE,EAF+B;;AAGxC,IAAA,OAAO,GAAA,CACN,CAJuC;;AAKxC,IAAA,MAAM,CAAE,CAAF,EAAG;AACP,aAAO,UAAU,CAAC,CAAD,EAAI,OAAJ,EAAa,OAAO,IAAI,OAAO,CAAC,OAAhC,CAAjB;AACD,KAPuC;;AAQxC,OAAG;AARqC,GAA1C;AAWA,EAAA,YAAY,CAAC,IAAb,GAAoB,IAAI,GAAJ,CAAQ,UAAR,CAApB;AACA,SAAO,YAAY,CAAC,IAApB;AACD","sourcesContent":["import Vue, { ComponentOptions, CreateElement } from 'vue'\nimport VueRouter from 'vue-router'\nimport { ZAdminApp } from './components/ZAdmin'\nimport { CreateAdminOptions, RouteComponent, Zui } from '../../types'\n\nimport { ZuiCoreClass } from './ZuiCore'\nimport { createZui } from './createZui'\nimport { ZRouterClass } from './ZRouter'\n\n/**\n * 创建主程序\n * @internal\n */\nfunction createMain (h: CreateElement, options: CreateAdminOptions, appHome?: RouteComponent) {\n  return h(ZAdminApp, {\n    staticClass: `z-app ${options.appClass || ''}`,\n    props: {\n      id: options.appId || 'app',\n    },\n  },\n  // 子元素列表\n  [appHome ? h(appHome) : '']\n  )\n}\n\n/**\n * 创建Admin, 基于 @zwd/z-ui\n * @param options\n */\nexport function createAdmin (options: CreateAdminOptions): Vue {\n  options = options || {}\n\n  // 安装 vue-router\n  Vue.use(VueRouter)\n\n  // 安装 zui-core\n  Vue.use(ZuiCoreClass, options)\n\n  const { $menu, $theme, $auth } = ZuiCoreClass.genInstance()\n\n  // 设置认证\n  $auth.setting(options.auth || {})\n\n  // 设置菜单\n  $menu.settingMenus(options.menus || [], false)\n\n  // 设置 vuetify and zui\n  const presetOptions = $theme.getDefaultPreset(options.presetOptions)\n  const ui = createZui(presetOptions, options.useOptions)\n  ZuiCoreClass.settingVuetify(ui.framework)\n\n  const componentOptions: ComponentOptions<any> = options.componentOptions || {}\n\n  const adminRouter = ZRouterClass.adminRouter || ZRouterClass.genAdminRouter({\n    appMain: options.appMain,\n    appHome: options.appHome,\n  })\n\n  let router = componentOptions.router\n  let appHome: RouteComponent | undefined\n\n  if (adminRouter) {\n    router = adminRouter.getRouter()\n    appHome = adminRouter.appHome\n  }\n\n  if (router) {\n    componentOptions.router = router\n    ZRouterClass.router = router\n  }\n\n  // 生成 vue 选项\n  const vueOptions: ComponentOptions<any> = {\n    el: options.appId || '#app',\n    vuetify: ui as unknown as Zui,\n    mounted () {\n    },\n    render (h) {\n      return createMain(h, options, appHome || options.appHome)\n    },\n    ...componentOptions,\n  }\n\n  ZuiCoreClass.$app = new Vue(vueOptions)\n  return ZuiCoreClass.$app\n}\n"],"sourceRoot":"","file":"createAdmin.js"}