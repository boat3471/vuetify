{"version":3,"sources":["../../../../src/zui/components/ZColorSelector/ZColorSelector.ts"],"names":[],"mappings":"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","sourcesContent":["import { VNode, VNodeData } from 'vue'\nimport mixins from '../../../util/mixins'\nimport { ZColorSelectorMixin, ColorInfo } from '../../mixins/ZColorSelectorMixin'\nimport { ZColorPicker, ZCard } from '../../../components'\nimport './ZColorPicker.scss'\n\ntype ClickType = 'history' | 'theme' | 'initial'\n\nexport default mixins(ZColorSelectorMixin).extend({\n  name: 'z-color-selector',\n  props: {\n    height: {\n      type: [Number, String],\n      default: 20,\n    },\n    width: {\n      type: [Number, String],\n      default: 20,\n    },\n    value: {\n      type: String,\n      default: '',\n    },\n    transparent: {\n      type: Boolean,\n      default: true,\n    },\n    none: {\n      type: Boolean,\n      default: true,\n    },\n  },\n\n  data () {\n    return {\n      colorData: {},\n      colorName: '',\n      colorHex: '',\n      initialName: '',\n      initialColor: '',\n      historyColors: this.getHistoryColors(),\n      themeOptions: this.getThemeColorOptions(),\n      lastInfo: {},\n      firstUpdateColor: true,\n    }\n  },\n\n  computed: {},\n\n  watch: {\n    value: {\n      immediate: true,\n      handler (value) {\n        const lastInfo: ColorInfo = this.lastInfo as ColorInfo\n        if (lastInfo && (value === lastInfo.name || value === lastInfo.color)) {\n          return\n        }\n        const info = this.getColorByName(value)\n        this.colorData = info\n        this.colorName = info.name || ''\n        this.colorHex = info.color\n        this.lastInfo = info\n\n        if (!this.initialColor) {\n          this.initialName = info.name\n          this.initialColor = info.color\n        }\n      },\n    },\n  },\n  mounted () {\n    this.$emit('ready', {\n      name: this.colorName,\n      color: this.colorHex,\n    })\n  },\n  methods: {\n    onUpdateColor (value: any) {\n      if (this.firstUpdateColor) {\n        this.firstUpdateColor = false\n        if (this.value === 'none' || this.value === '' || this.value === 'transparent') {\n          return\n        }\n      }\n      this.colorData = value\n      this.colorHex = value.hex\n      this.colorName = value.hex\n    },\n    onUpdateAfter () {\n      this.emitColorChange()\n    },\n    /** 点击圆盘记录历史颜色 */\n    onActionDot () {\n      this.addHistoryColor(this.colorHex)\n    },\n    /** 提交颜色 */\n    emitColorChange () {\n      const { colorName, colorHex } = this\n      if (colorHex) {\n        this.$emit('change', {\n          name: colorName || colorHex,\n          color: colorName === 'none' ? '' : colorHex,\n          isTheme: false,\n        })\n      }\n    },\n    /** 点击颜色 */\n    onClickColor (type: ClickType, colorName: string, colorValue?: string) {\n      switch (type) {\n        case 'history': // 点击历史颜色时\n          this.colorName = colorValue || ''\n          this.colorHex = colorValue || ''\n          this.emitColorChange()\n          break\n        case 'theme': // 点击主题颜色时\n          if (!colorValue) {\n            colorValue = this.getVuetifyThemeColor(colorName)\n          }\n          this.colorName = colorName\n          this.colorHex = colorValue || ''\n          this.$emit('change', {\n            name: colorName,\n            color: colorValue,\n            isTheme: true,\n          })\n          break\n        case 'initial': // 点击初始颜色\n          this.colorName = colorName\n          this.colorHex = colorValue || ''\n          this.emitColorChange()\n          break\n      }\n    },\n    genColorPicker (): VNode {\n      const data: VNodeData = {\n        props: {\n          value: this.colorHex,\n          // dotSize: '10',\n          hideModeSwitch: true,\n          mode: 'hexa',\n          // swatchesMaxHeight: '100',\n        },\n        on: {\n          'update:color': this.onUpdateColor,\n          'update:after': this.onUpdateAfter,\n          'action:dot': this.onActionDot,\n        },\n      }\n      return this.$createElement(ZColorPicker, data, ['genThemeColorContent'])\n    },\n    genColorCard (colorName: string, title: string, type: ClickType, colorValue?: string): VNode {\n      const style: any = {}\n      const classes = ['mr-1']\n\n      if (type === 'theme') {\n        classes.push(colorName)\n      } else {\n        style.backgroundColor = colorName\n      }\n\n      if (colorName === 'transparent') {\n        classes.push('color--item-transparent')\n      } else {\n        classes.push('color--item')\n      }\n\n      const children = []\n      if (colorName === 'none') {\n        children.push(this.$createElement('z-icon', 'mdi-cancel'))\n      }\n\n      const data: VNodeData = {\n        staticClass: classes.join(' '),\n        props: {\n          flat: true,\n          outlined: true,\n          title,\n        },\n        style,\n        on: {\n          click: () => {\n            switch (type) {\n              case 'history' :\n                this.onClickColor(type, colorName, colorName)\n                break\n              case 'theme':\n                this.onClickColor(type, colorName, colorValue)\n                break\n              case 'initial' :\n                break\n            }\n          },\n        },\n      }\n\n      return this.$createElement(ZCard, data, children)\n    },\n    genThemeColorContent (): VNode {\n      const data: VNodeData = {\n        staticClass: 'theme-colors pb-2 px-3',\n      }\n      return this.$createElement('div', data, [\n        this.none ? this.genColorCard('none', '无', 'history') : null,\n        this.transparent ? this.genColorCard('transparent', '透明', 'history', '#00000000') : null,\n        this.genColorCard('#FFFFFF', '白色', 'history'),\n        this.genColorCard('#000000', '黑色', 'history'),\n        this.$createElement('z-divider', { staticClass: 'ml-1 mr-2', props: { vertical: true } }),\n        this.themeOptions.map(i => this.genColorCard(i.name, i.label, 'theme', i.color)),\n      ])\n    },\n    genHistoryColorContent (): VNode {\n      const data: VNodeData = {\n        staticClass: 'history-colors pb-4 px-3',\n      }\n      return this.$createElement('div', data, [\n        this.genColorCard('#FFFFFF', '白色', 'history'),\n        this.historyColors.map(i => {\n          return this.genColorCard(i, i, 'history')\n        }),\n      ])\n    },\n  },\n\n  render (h): VNode {\n    return h(ZCard, {\n      staticClass: 'z-color-selector-card',\n      class: {},\n      props: {},\n    }, [\n      this.genColorPicker(),\n      this.genThemeColorContent(),\n      this.genHistoryColorContent(),\n    ])\n  },\n})\n"],"sourceRoot":"","file":"ZColorSelector.js"}