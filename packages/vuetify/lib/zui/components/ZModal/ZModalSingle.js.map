{"version":3,"sources":["../../../../src/zui/components/ZModal/ZModalSingle.ts"],"names":[],"mappings":"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","sourcesContent":["import Vue, { VNode } from 'vue'\nimport {\n  ZDialog, ZCard, ZCardTitle, ZCardText, ZCardActions, ZDivider, ZSpacer, ZRow, ZCol, ZIcon, ZBtn,\n} from '../../../components'\nimport './ZModal.scss'\n\nexport const ZModalSingle = Vue.extend({\n  name: 'z-global-modal',\n  props: {\n    type: String,\n    icon: String,\n    title: String,\n    message: String,\n    html: {\n      type: Boolean,\n      default: false,\n    },\n    showClose: {\n      type: Boolean,\n      default: true,\n    },\n    showCancel: {\n      type: Boolean,\n      default: true,\n    },\n    labelCancel: {\n      type: String,\n      default: '取消',\n    },\n    labelSure: {\n      type: String,\n      default: '确定',\n    },\n    width: {\n      type: Number,\n      default: 450,\n    },\n    top: {\n      type: String,\n      default: '',\n    },\n    delay: {\n      type: Number,\n      default: 0,\n    },\n  },\n  data () {\n    const delay = this.$props.delay\n    const labelSure = `${this.$props.labelSure}${delay > 0 ? '(' + delay + ')' : ''}`\n    return {\n      visible: true,\n      labelSureDisplay: labelSure,\n      delayCount: delay,\n      delayTimer: 0,\n    }\n  },\n  computed: {\n    color () {\n      if (this.type === 'info' || this.type === 'confirm') {\n        return 'primary'\n      }\n      return this.type\n    },\n    iconColor () {\n      if (this.type === 'info') {\n        return 'primary'\n      }\n      if (this.type === 'confirm') {\n        return 'warning'\n      }\n      return this.type\n    },\n    classes () {\n      const list = ['z-modal']\n      switch (this.type) {\n        case 'info':\n          list.push('z-modal-info')\n          break\n        case 'success':\n          list.push('z-modal-success')\n          break\n        case 'warning':\n          list.push('z-modal-warning')\n          break\n        case 'error':\n          list.push('z-modal-error')\n          break\n        default:\n          break\n      }\n      return list.join(' ')\n    },\n  },\n  mounted () {\n    const labelSure = this.labelSure\n    let total = this.$props.delay\n    if (total > 0) {\n      (this as any).delayTimer = setInterval(() => {\n        total--\n        this.labelSureDisplay = `${labelSure}(${total})`\n        if (total === 0) {\n          clearInterval(this.delayTimer)\n          this.labelSureDisplay = labelSure\n          this.delayCount = 0\n        }\n      }, 1000)\n    }\n  },\n  destroyed () {\n    clearInterval(this.delayTimer)\n  },\n  methods: {\n    sure () {\n      const fn = (this as any).sureBeforeFun\n      const fnResult = fn && fn()\n      const isClose = fnResult !== false\n      if (isClose) {\n        this.visible = false\n        clearInterval(this.delayTimer)\n      }\n    },\n    cancel () {\n      const fn = (this as any).cancelBeforeFun\n      const fnResult = fn && fn('cancel')\n      const isClose = fnResult !== false\n      if (isClose) {\n        this.visible = false\n        clearInterval(this.delayTimer)\n      }\n    },\n    close () {\n      const fn = (this as any).cancelBeforeFun\n      const fnResult = fn && fn('close')\n      const isClose = fnResult !== false\n      if (isClose) {\n        this.visible = false\n        clearInterval(this.delayTimer)\n      }\n    },\n    /**\n     * 强制关闭函数\n     */\n    closeForceFun () {\n      this.visible = false\n      clearInterval(this.delayTimer)\n    },\n    /**\n     * 设置点击确认前函数\n     */\n    setSureBeforeFun (fn: () => void) {\n      if (fn && typeof fn === 'function') {\n        (this as any).sureBeforeFun = fn\n      }\n    },\n    /**\n     * 设置点击取消或关闭前\n     */\n    setCancelBeforeFun (fn: (type: string) => void) {\n      if (fn && typeof fn === 'function') {\n        (this as any).cancelBeforeFun = fn\n      }\n    },\n    genBody (): VNode {\n      const titleName = this.$createElement(ZCol, {}, [this.title])\n      const titleClose = this.$createElement(ZCol, { props: { cols: 'auto' } }, [\n        this.$createElement(ZBtn, { props: { icon: true }, on: { click: this.close } }, [\n          this.$createElement(ZIcon, { props: { small: true } }, ['mdi-close']),\n        ]),\n      ])\n      const title = this.title\n        ? this.$createElement(ZCardTitle, { staticClass: 'px-3 py-1' }, [\n          this.$createElement(ZRow, {}, [\n            titleName,\n            this.showClose ? titleClose : '',\n          ]),\n        ]) : null\n      const contentIcon = this.icon\n        ? this.$createElement(ZCol,\n          {\n            staticClass: 'd-flex justify-center align-center pr-2',\n            props: { cols: 'auto' },\n          },\n          [this.$createElement(ZIcon, { props: { color: this.iconColor } }, [this.icon])])\n        : null\n      // eslint-disable-next-line sonarjs/no-all-duplicated-branches\n      const contentText = this.html\n        ? this.$createElement(ZCol, { domProps: { innerHTML: this.message } }, [])\n        : this.$createElement(ZCol, {}, [this.message])\n      const content = this.$createElement(ZCardText, { staticClass: 'pt-5' },\n        [\n          this.$createElement(ZRow, {\n            props: {\n              align: 'center',\n              justify: 'center',\n              noGutters: true,\n            },\n          }, [\n            contentIcon,\n            contentText,\n          ]),\n        ])\n\n      // 取消按钮\n      const cancelBtn = this.$createElement(ZBtn, {\n        props: {\n          color: 'secondary',\n          outlined: false,\n          text: true,\n          xs: true,\n        },\n        on: {\n          click: this.cancel,\n        },\n      }, [this.labelCancel])\n\n      // 确认按钮\n      const sureBtn = this.$createElement(ZBtn, {\n        props: {\n          color: this.color,\n          // elevation: 1,\n          outlined: false,\n          text: true,\n          disabled: this.delayCount > 0,\n          xs: true,\n        },\n        on: {\n          click: this.sure,\n        },\n      }, [this.labelSureDisplay])\n      const actions = this.$createElement(ZCardActions, {}, [\n        this.$createElement(ZSpacer),\n        this.showCancel ? cancelBtn : null,\n        sureBtn,\n      ])\n      return this.$createElement(ZCard, {}, [\n        this.title ? title : null,\n        this.title ? this.$createElement(ZDivider) : null,\n        content,\n        this.$createElement(ZDivider),\n        actions,\n      ])\n    },\n    genDialog (): VNode | null {\n      return this.visible ? this.$createElement(ZDialog, {\n        props: {\n          value: this.visible,\n          contentClass: this.classes,\n          hideOverlay: false,\n          overlayOpacity: 0.2,\n          noClickAnimation: false,\n          persistent: true,\n          width: this.width,\n          top: this.top,\n        },\n      }, [\n        this.genBody(),\n      ]) : null\n    }\n    ,\n  },\n  render (): any {\n    return this.genDialog()\n  },\n})\n\nexport default ZModalSingle\n"],"sourceRoot":"","file":"ZModalSingle.js"}