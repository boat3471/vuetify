{"version":3,"sources":["../../../src/components/ZMessage/ZMessage.ts"],"names":[],"mappings":"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","sourcesContent":["import mixins from '../../util/mixins'\nimport { ZSnackbar } from '../VSnackbar/ZSnackbar'\nimport { ZMessageItem } from './ZMessageItem'\n\nexport const ZMessage = mixins(ZSnackbar).extend({\n  name: 'z-message',\n  props: {\n    offsetTop: {\n      type: Number,\n      default: 8,\n    },\n    itemGap: {\n      type: Number,\n      default: 8,\n    },\n    itemHeight: {\n      type: Number,\n      default: 42,\n    },\n    top: {\n      type: Boolean,\n      default: true,\n    },\n  },\n  mounted () {\n    const { duration } = this.$props\n    const that = this as any\n    const list = this.getMessageList()\n    const wrapper = this.$refs.wrapper as HTMLDivElement\n    wrapper.style.opacity = '1'\n    list.push({\n      id: that._uid,\n      duration: duration <= 0 ? -1 : duration,\n      vnode: that,\n      el: wrapper,\n      index: list.length,\n    })\n  },\n  methods: {\n    genWrapper () {\n      const list = this.getMessageList()\n      const wrapper = (ZSnackbar as any).options.methods.genWrapper.call(this)\n      const currentTop = this.offsetTop + (list.length * (this.itemGap + this.itemHeight))\n      wrapper.data.style = {\n        top: `${currentTop}px`,\n      }\n      wrapper.data.ref = 'wrapper'\n      return wrapper\n    },\n    setTimeout () {\n      const that = this as any\n      window.clearTimeout(that.activeTimeout)\n      const timeout = Number(that.timeout)\n      if (!that.isActive) {\n        this.resetLocation()\n      }\n      if (!that.isActive || [0, -1].includes(timeout)) {\n        return\n      }\n\n      that.activeTimeout = window.setTimeout(() => {\n        this.resetLocation()\n      }, timeout)\n    },\n    resetLocation () {\n      const that = this as any\n      const list = this.getMessageList() as ZMessageItem[]\n      const item = list.find(i => i.id === that._uid)\n      if (item) {\n        // 从池子中删除当前弹窗\n        list.splice(item.index, 1)\n        // 设置当前通知透明度为0;\n        item.el.style.opacity = '0'\n        // 设置当前通知位置，移出界面;\n        item.el.style.top = `${this.offsetTop + ((item.index - 1) * (this.itemGap + this.itemHeight))}px`\n        // 重置所有通知位置及其索引\n        this.resetAll(item.index)\n      }\n\n      // 等待动画结束后移除\n      setTimeout(() => {\n        that.isActive = false\n      }, 400)\n    },\n    resetAll (index = 0) {\n      const list = this.getMessageList() as ZMessageItem[]\n      list.forEach((item, i) => {\n        if (i >= index) {\n          const top = this.offsetTop + (i * (this.itemGap + this.itemHeight))\n          item.el.style.top = `${top}px`\n        }\n        item.index = i\n      })\n    },\n  },\n  render (createElement) {\n    const that = this as any\n    if (!that.isActive) {\n      return createElement('')\n    }\n    return createElement('div', {\n      staticClass: 'v-snack',\n      class: that.classes,\n      style: that.styles,\n    }, [that.transition !== false ? that.genTransition() : that.genWrapper()])\n  },\n})\n\nexport default ZMessage\n"],"sourceRoot":"","file":"ZMessage.js"}