{"version":3,"sources":["../../src/zui/ZuiCore.ts"],"names":[],"mappings":"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","sourcesContent":["import Vue, { VueConstructor } from 'vue'\nimport * as directives from './directives'\nimport {\n  ZuiOptions,\n  ZuiCoreDescription,\n  ZMenuOption, CreateAdminOptions,\n} from '../../types'\nimport { UIEvent } from './events/UIEvent'\nimport { ZMenuClass } from './ZMenu'\nimport { ZRouterClass } from './ZRouter'\nimport { ZThemeClass } from './ZTheme'\nimport { ZModalClass } from './ZModal'\nimport { ZMessageClass } from './ZMessage'\nimport { ZAuthClass } from './ZAuth'\nimport debug from './util/debug'\n\nlet instance: ZuiCoreClass\n\nexport class ZuiCoreClass extends UIEvent implements ZuiCoreDescription {\n  static type: 'app' | 'admin' | '' = '';\n  static initialized = false;\n  static callbackList: Function[] = [];\n  static readyCheck (): void {\n    if (!ZuiCoreClass.initialized) {\n      window.console.warn('Zui is not initialized! Please use $zui.ready(callback) and call when ready')\n    }\n  }\n\n  constructor (options?: ZuiOptions) {\n    super()\n    if (!instance) {\n      instance = this\n      ZuiCoreClass.setting(options)\n      this.on('ready', () => {\n        ZuiCoreClass.initialized = true\n        if (ZuiCoreClass.callbackList) {\n          ZuiCoreClass.callbackList.forEach(fn => {\n            fn()\n          })\n          ZuiCoreClass.callbackList = []\n        }\n      })\n    }\n    return instance\n  }\n\n  ready (callback: () => void): void {\n    ZuiCoreClass.callbackList.push(callback)\n  }\n\n  get $menu (): ZMenuClass {\n    return ZMenuClass.genInstance()\n  }\n\n  get $router (): ZRouterClass {\n    return ZRouterClass.genInstance()\n  }\n\n  get $theme (): ZThemeClass {\n    return ZuiCoreClass.$theme\n  }\n\n  get $modal (): ZModalClass {\n    return ZModalClass.genInstance()\n  }\n\n  get $message (): ZMessageClass {\n    return ZMessageClass.genInstance()\n  }\n\n  get $auth (): ZAuthClass {\n    return ZAuthClass.genInstance()\n  }\n\n  /**\n   * App名称\n   */\n  get appName () {\n    return ZuiCoreClass.$options.appName || ''\n  }\n\n  /**\n   * App唯一标示\n   */\n  get appKey () {\n    return ZuiCoreClass.$options.appKey || ''\n  }\n\n  /**\n   * App编号\n   */\n  get appId () {\n    return ZuiCoreClass.$options.appId || ''\n  }\n\n  /**\n   * App 重定向路径\n   */\n  get appRedirect (): string {\n    return (ZuiCoreClass.$options as CreateAdminOptions).redirect || ''\n  }\n\n  /**\n   * 获取主菜单列表\n   */\n  get menus (): ZMenuOption[] {\n    return ZMenuClass.__menusData\n  }\n\n  /**\n   * 获取默认主题状态\n   */\n  get darkStatus (): boolean {\n    return this.$theme.darkStatus || false\n  }\n\n  /**\n   * 获取默认主题大小\n   */\n  get defaultSize (): string {\n    return ZuiCoreClass.$options.defaultSize || 's'\n  }\n\n  /**\n   * 获取默认的提示背景色\n   */\n  get defaultTooltipColor (): string {\n    return ZuiCoreClass.$options.defaultTooltipColor || '#616161'\n  }\n\n  /**\n   * 获取默认的提示背景色\n   */\n  get defaultTooltipSize (): string {\n    return ZuiCoreClass.$options.defaultTooltipSize || 's'\n  }\n\n  /**\n   * 回到首页\n   */\n  openHome () {\n    const { openHome } = ZuiCoreClass.$options as any\n\n    if (openHome) {\n      openHome()\n      return true\n    } else {\n      let type = ''\n      switch (ZuiCoreClass.type) {\n        case 'app':\n          type = 'createApp'\n          break\n        case 'admin':\n          type = 'createAdmin'\n          break\n      }\n      debug.warn(`请在 ${type} 中配置 openHome，实现重定向跳转！`)\n    }\n    return false\n  }\n\n  /**\n   * 回到登录页面\n   */\n  openLogin () {\n    const { openLogin } = ZuiCoreClass.$options as any\n\n    if (openLogin) {\n      openLogin()\n    }\n  }\n\n  static $app: Vue;\n\n  /** @internal */\n  static $vuetifyInstalled = false;\n\n  /** @internal */\n  static $vuetify: any = {\n    theme: {\n      dark: true,\n    },\n  };\n\n  /** @internal */\n  static $options: ZuiOptions = {};\n\n  /** @internal */\n  static $theme: ZThemeClass;\n\n  static settingVuetify (vuetify: any) {\n    ZuiCoreClass.$vuetify = vuetify\n    ZuiCoreClass.$vuetifyInstalled = true\n    ZThemeClass.settingVuetify(vuetify)\n  }\n\n  static setting (options?: ZuiOptions) {\n    if (options) {\n      ZuiCoreClass.$options = options\n      ZuiCoreClass.$theme = new ZThemeClass(options.appKey || '', {\n        mainMenuWidth: (options as CreateAdminOptions).defaultMenuWidth,\n      })\n      ZMessageClass.appId = options.appId || 'app'\n    }\n  }\n\n  static genInstance (): ZuiCoreClass {\n    if (!instance) {\n      instance = new ZuiCoreClass()\n    }\n    return instance\n  }\n\n  static install (Vue: VueConstructor, options: ZuiOptions) {\n    ZuiCoreClass.setting(options)\n    const core = ZuiCoreClass.genInstance()\n\n    if (!(ZuiCoreClass.install as any).initialized) {\n      (ZuiCoreClass.install as any).initialized = true\n    }\n\n    // 安装Zui指令\n    Object.keys(directives).forEach(name => {\n      Vue.directive(name, (directives as any)[name])\n    })\n\n    Vue.mixin({\n      beforeCreate () {\n        const $options = this.$options\n\n        // 安装 ZuiCore\n        if (!this.$ui) {\n          this.$ui = core\n        } else {\n          $options.parent && (this.$ui = $options.parent.$ui)\n        }\n\n        // 安装 ZModal\n        if (!this.$modal) {\n          this.$modal = core.$modal\n        } else {\n          $options.parent && (this.$modal = $options.parent.$modal)\n        }\n\n        // 安装 ZMessage\n        if (!this.$message) {\n          this.$message = core.$message\n        } else {\n          $options.parent && (this.$message = $options.parent.$message)\n        }\n\n        // 安装 ZMenu\n        if (!this.$menu) {\n          this.$menu = core.$menu\n        } else {\n          $options.parent && (this.$menu = $options.parent.$menu)\n        }\n\n        // 安装 ZTheme\n        if (!this.$theme) {\n          this.$theme = core.$theme\n          this.$themeStore = core.$theme.themeStore\n        } else {\n          $options.parent && (this.$theme = $options.parent.$theme)\n        }\n      },\n    })\n  }\n}\n"],"sourceRoot":"","file":"ZuiCore.js"}