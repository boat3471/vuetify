{"version":3,"sources":["../../src/zui/ZRouter.ts"],"names":[],"mappings":"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","sourcesContent":["import VueRouter, { Route, RouteConfig, RedirectOption, RouterOptions } from 'vue-router'\nimport { CreateAdminRouterOptions, CreateAppRouterOptions, RouteComponent, ZMenuOption } from '../../types'\nimport { ZRouterDescription } from '../../types/zui/ZRouter'\nimport { ZAdmin, ZApp } from '../components'\nimport { ZView403, ZView404, ZView500, ZDefaultLogin } from './components/ZAdmin'\nimport Vue from 'vue'\n\nlet instance: ZRouterClass\n\ninterface CreateAdminRouterOptionsInner extends CreateAdminRouterOptions {\n  router?: VueRouter\n}\n\ninterface CreateAppRouterOptionsInner extends CreateAppRouterOptions {\n  router?: VueRouter\n}\n\nexport class ZAppRouter {\n  protected _router: VueRouter | null = null\n  appHome?: RouteComponent\n  appMain?: RouteComponent\n  appLogin?: RouteComponent\n  appNotAccess?: RouteComponent\n  appNotFound?: RouteComponent\n  appServerError?: RouteComponent\n\n  isRenderRouterView = false\n\n  routerOptions?: RouterOptions\n\n  genRoute (path: string, comp: RouteComponent | boolean | undefined, def: RouteComponent): RouteConfig[] {\n    if (comp === true) {\n      return [{ path, component: def }]\n    }\n    if (comp) {\n      return [{ path, component: comp }]\n    }\n    return []\n  }\n\n  getRouter (): VueRouter {\n    if (this._router) {\n      return this._router\n    }\n    this._router = new VueRouter(this.routerOptions)\n    return this._router\n  }\n\n  addNotFoundRoute (route: RouteConfig, notFoundComponent: RouteComponent): void {\n    if (route.children && route.children.length > 0) {\n      // 如果已经存在，则不添加\n      const needed = !(route.children.some(i => i.path === '*') || route.path === '/' || route.path === '*')\n      if (needed) {\n        route.children.push({ path: '*', component: notFoundComponent })\n      }\n      route.children.forEach(child => this.addNotFoundRoute(child, notFoundComponent))\n    }\n  }\n\n  setting (options: CreateAppRouterOptionsInner): void {\n    // 如果存在自定义router,则不做任何处理\n    const router = options.router\n    if (router) {\n      this._router = router\n      return\n    }\n\n    if (options) {\n      this.isRenderRouterView = !options.appMain && !options.appHome\n\n      this.appHome = options.appHome\n      this.appMain = options.appMain || ZApp\n\n      const routerOptions: RouterOptions = options.routerOptions || Object.create(null)\n      const routes = routerOptions.routes || []\n\n      routes.push(...this.genRoute('/login', options.appLogin, ZDefaultLogin))\n      routes.push(...this.genRoute('/500', options.appServerError, ZView500))\n      routes.push(...this.genRoute('/403', options.appNotAccess, ZView403))\n      routes.push(...this.genRoute('*', options.appNotFound, ZView404))\n\n      routerOptions.routes = routes\n\n      this.routerOptions = routerOptions\n    }\n  }\n}\n\nexport class ZAdminRouter extends ZAppRouter {\n  genComp (usr: RouteComponent | boolean | undefined, def: RouteComponent): RouteComponent | undefined {\n    if (typeof usr === 'boolean') {\n      return usr ? def : undefined\n    }\n    return usr || def\n  }\n\n  get defaultHome () {\n    return Vue.extend({\n      name: 'z-admin-default-home',\n      render (h) {\n        return h('div', { staticClass: 'z-admin-default-home' })\n      },\n    })\n  }\n\n  /**\n   * 生成完整路径\n   * @param path\n   * @param parentPath\n   */\n  genFullPathByMenu (path: string, parentPath?: string): string {\n    if (path.indexOf('/') !== 0) {\n      return `/${parentPath || ''}/${path}`.replace(/\\/+/g, '/')\n    }\n    return path\n  }\n\n  parseUsrRoutes (routes: RouteConfig[], parentPath: string): RouteConfig[] {\n    const list: RouteConfig[] = []\n    routes.forEach(route => {\n      if (route) {\n        route.path = this.genFullPathByMenu(route.path)\n        route.name = route.name || `usr-${route.path.replace(/\\//g, '-')}`\n        list.push(route)\n      }\n    })\n    return list\n  }\n\n  /**\n   * 根据菜单生成路由列表\n   * @param menus\n   * @param rootList\n   * @param parentPath\n   */\n  genRoutesByMenus (menus: ZMenuOption[], rootList: RouteConfig[], parentPath = '/'): RouteConfig[] {\n    const list: RouteConfig[] = []\n    if (menus) {\n      menus.forEach(menu => {\n        if (!menu.path && !menu.href && (!menu.children || menu.children.length < 1)) {\n          window.console.warn(`菜单配置无法生成路由: \\n ${JSON.stringify(menu, null, 4)}`)\n          return\n        }\n        menu.path = menu.path || ''\n        let path = (menu.path || '').indexOf('/') === 0 ? menu.path : `${parentPath}/${menu.path}`\n        path = path.replace(/\\/{2,}/g, '/')\n        if (menu.path) {\n          const route: RouteConfig = {\n            name: menu.name,\n            path: path || '',\n            component: menu.component,\n            meta: {\n              name: menu.name || menu.title,\n              ...menu.meta,\n            },\n          }\n\n          if (menu.redirect) {\n            route.redirect = menu.redirect\n          }\n\n          if (menu.alias) {\n            route.alias = menu.alias\n          }\n\n          if (menu.beforeEnter) {\n            route.beforeEnter = menu.beforeEnter\n          }\n\n          route.name = (route.path || '').replace(/\\//g, '-')\n\n          rootList.push(route)\n        }\n\n        if (menu.children && menu.children.length > 0) {\n          this.genRoutesByMenus(menu.children, rootList, path)\n        }\n      })\n    }\n    return list\n  }\n\n  /** 生成异常路由 */\n  genExceptionRoute (name = '', path = ''): RouteConfig[] {\n    const list: RouteConfig[] = []\n    list.push({\n      name: `${name}-403`,\n      path: `${path}/403`.replace(/\\/\\//g, '/'),\n      component: ZView403,\n    })\n    list.push({\n      name: `${name}-500`,\n      path: `${path}/500`.replace(/\\/\\//g, '/'),\n      component: ZView500,\n    })\n    list.push({\n      name: `${name}-404`,\n      path: `${path}/*`.replace(/\\/\\//g, '/'),\n      component: ZView404,\n    })\n    return list\n  }\n\n  /**\n   * 根据菜单创建路由列表\n   * @param menus\n   * @param redirect\n   */\n  createRoutesByMenus (menus: ZMenuOption[] = [], redirect: RedirectOption = '/home'): RouteConfig[] {\n    if (menus && menus.length > 0) {\n      const children: RouteConfig[] = []\n      children.push(...this.genRoutesByMenus(menus, children, '/'))\n      children.push(...this.genExceptionRoute())\n      // children.push({ name: '--empty', path: '', redirect })\n      return children\n    }\n    return []\n  }\n\n  setting (options: CreateAdminRouterOptionsInner): void {\n    // 如果存在自定义router\n    const router = options.router\n    if (router) {\n      this._router = router\n      return\n    }\n\n    const NotFoundElement = this.genComp(options.appNotFound, ZView404)\n    const NotFoundRoute = { path: '*', component: NotFoundElement }\n    const routeLogin: RouteConfig = { name: 'r__login', path: '/login', component: this.genComp(options.appLogin, ZDefaultLogin) }\n    const route500: RouteConfig = { name: 'r__500', path: '/500', component: this.genComp(options.appServerError, ZView500) }\n    const route403: RouteConfig = { name: 'r__403', path: '/403', component: this.genComp(options.appNotAccess, ZView403) }\n    const route404: RouteConfig = { name: 'r__404', path: '/404', component: NotFoundElement }\n\n    const routeRoot404: RouteConfig = { name: 'r__root_404', path: '*', component: NotFoundElement }\n    const routeRoot: RouteConfig = { path: '/', component: options.appMain || ZAdmin }\n    const routeHome: RouteConfig = { path: '', component: options.appHome || this.defaultHome }\n\n    // 跟节点所有前置子节点\n    const beforeChildren: RouteConfig[] = [routeHome]\n    // 跟节点所有中置子节点\n    const middleChildren: RouteConfig[] = []\n    // 跟节点所有后置子节点\n    const afterChildren: RouteConfig[] = [NotFoundRoute]\n\n    // 给Home设置重定向\n    options.redirect && (routeHome.redirect = options.redirect)\n\n    const routerOptions = options.routerOptions || {}\n    const usrRoutes = routerOptions.routes || []\n    let usrRedirect: any = ''\n\n    usrRoutes.forEach(route => {\n      if (route.path === '/' || route.path === '') {\n        const children = route.children || []\n        delete route.children\n\n        if ('component' in route && route.component) {\n          routeHome.component = route.component\n        }\n        // 设置用户自定义的重定向，会忽略options中定义的重定向\n        !usrRedirect && (usrRedirect = route.redirect)\n\n        // 添加所有子组件到跟路由\n        middleChildren.push(...children)\n      } else {\n        middleChildren.push(route)\n      }\n    })\n\n    usrRedirect && (routeHome.redirect = usrRedirect)\n\n    const menuRoutes = this.createRoutesByMenus(options.menus, '')\n\n    routeRoot.children = [...beforeChildren, ...middleChildren, ...menuRoutes, ...afterChildren]\n\n    routerOptions.routes = [\n      routeLogin,\n      route500,\n      route403,\n      route404,\n      routeRoot,\n      routeRoot404,\n    ]\n    this.routerOptions = routerOptions\n  }\n}\n\nexport class ZRouterClass implements ZRouterDescription {\n  get self (): VueRouter {\n    return ZRouterClass.router\n  }\n\n  get currentRouter (): VueRouter {\n    return ZRouterClass.router\n  }\n\n  get currentRoute (): Route {\n    return ZRouterClass.router.currentRoute\n  }\n\n  get currentRoutePath (): string {\n    return ZRouterClass.router.currentRoute.path\n  }\n\n  getRouter (): VueRouter {\n    return ZRouterClass.router\n  }\n\n  addRoutesByMenus (menus: ZMenuOption[] = []) {\n    const router = this.currentRouter\n    if (router) {\n      const options = ZRouterClass.adminRouter || {}\n      ZRouterClass.menus = menus = menus || []\n\n      // todo 待完成，动态添加菜单\n      const routes: RouteConfig[] = [] // genRoutesByOptions(options)\n      const routerOptions: RouterOptions = options.routerOptions || Object.create(null)\n      routerOptions.routes = routes\n\n      const newRouter = new VueRouter(routerOptions);\n\n      (router as any).matcher = (newRouter as any).matcher\n\n      // 强制刷新当前路由\n      const route = router.currentRoute\n      router.replace({ path: route.path, query: { ...route.query, t: Date.now() + '' } }).then()\n      router.replace({ path: route.path, query: { ...route.query } }).then()\n    }\n  }\n\n  constructor () {\n    if (!instance) {\n      instance = this\n    }\n    return instance\n  }\n\n  static appRouter: ZAppRouter;\n  static adminRouter: ZAdminRouter;\n  static genAppRouter (options: CreateAppRouterOptionsInner): ZAppRouter {\n    const appRouter = new ZAppRouter()\n    appRouter.setting(options)\n    ZRouterClass.appRouter = appRouter\n    options && options.router && (ZRouterClass.router = options.router)\n    return appRouter\n  }\n\n  static genAdminRouter (options: CreateAdminRouterOptionsInner): ZAdminRouter {\n    const adminRouter = new ZAdminRouter()\n    adminRouter.setting(options)\n    ZRouterClass.adminRouter = adminRouter\n    options && options.router && (ZRouterClass.router = options.router)\n    return adminRouter\n  }\n\n  static menus?: ZMenuOption[]\n\n  static router: VueRouter\n\n  static genInstance (): ZRouterClass {\n    if (!instance) {\n      instance = new ZRouterClass()\n    }\n    return instance\n  }\n}\n\nexport const ZRouter = ZRouterClass.genInstance()\n"],"sourceRoot":"","file":"ZRouter.js"}