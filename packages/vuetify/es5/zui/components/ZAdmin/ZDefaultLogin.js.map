{"version":3,"sources":["../../../../src/zui/components/ZAdmin/ZDefaultLogin.ts"],"names":[],"mappings":"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","sourcesContent":["import Vue, { CreateElement, VNode } from 'vue'\nimport {\n  ZForm,\n  ZBtn,\n  ZCard,\n  ZCardActions, ZCardSubtitle, ZCardTitle, ZContainer, ZRow,\n  ZTextField, ZCheckbox, ZCardText,\n} from '../../../components'\nimport { getSlot } from '../../../util/helpers'\n\nimport './styles/ZDefaultLogin.scss'\n\nexport const ZDefaultLogin = Vue.extend({\n  name: 'z-default-login',\n  data () {\n    return {\n      projectDisplayName: this.$ui.appName || 'Admin Project Name',\n      username: '',\n      rules: {\n        required: (v: string) => !!v || 'Name is required',\n        username: (v: string) => (v && v.length >= 4 && v.length <= 20) || '用户名至少4个字符，最多20个字符',\n        password: (v: string) => (v && v.length >= 4 && v.length <= 20) || '密码至少6个字符，最多20个字符',\n      },\n      password: '',\n      remember: false,\n      loginPd: true,\n      loginError: false,\n      disabled: false,\n      errorShake: false,\n      errorMessage: '',\n    }\n  },\n  mounted () {\n  },\n  destroyed () {\n  },\n  methods: {\n    login () {\n      const { loginForm } = this.$refs\n      if ((loginForm as any).validate()) {\n        this.disabled = true\n        if (this.$auth.login) {\n          this.$auth.login({\n            username: this.username,\n            password: this.password,\n            remember: this.remember,\n          }).then(res => {\n            if (this.$auth.verifyLogin && this.$auth.verifyLogin(res)) {\n              // console.info('login success', res)\n            } else {\n              this.disabled = false\n            }\n          }).catch(e => {\n            // console.info('login failed', e)\n            this.disabled = false\n          })\n        } else {\n          this.$router.replace({ path: '/' })\n        }\n      }\n    },\n    genTitle (h: CreateElement): VNode {\n      const title = getSlot(this, 'title') || this.projectDisplayName\n      return h(ZCardTitle, {\n        staticClass: 'headline',\n      }, [title])\n    },\n    genSubTitle (h: CreateElement): VNode {\n      const subtitle = getSlot(this, 'subtitle')\n      return h(ZCardSubtitle, {}, [subtitle])\n    },\n    genUsername (h: CreateElement): VNode[] {\n      const title = h(ZRow, { props: { noGutters: true } }, [\n        h('b', { style: { lineHeight: '30px' } }, 'Username'),\n      ])\n      const input = h(ZRow, { props: { noGutters: true } }, [\n        h(ZTextField, {\n          staticClass: 'z-default-login-input',\n          props: {\n            value: this.username,\n            autofocus: true,\n            required: true,\n            outlined: true,\n            l: true,\n            persistentHint: true,\n            hideDetails: false,\n            rules: [\n              this.rules.required,\n              this.rules.username,\n            ],\n          },\n          on: {\n            keyup: (event: KeyboardEvent) => {\n              if (event.key === 'Enter') {\n                this.login()\n              }\n            },\n          },\n        }),\n      ])\n      return [title, input]\n    },\n    genPassword (h: CreateElement): VNode[] {\n      const title = h(ZRow, { props: { noGutters: true } }, [\n        h('b', { style: { lineHeight: '30px' } }, 'Password'),\n      ])\n      const input = h(ZRow, { props: { noGutters: true } }, [\n        h(ZTextField, {\n          staticClass: 'z-default-login-input',\n          props: {\n            value: this.password,\n            required: true,\n            outlined: true,\n            l: true,\n            persistentHint: true,\n            hideDetails: false,\n            appendIcon: this.loginPd ? 'mdi-eye' : 'mdi-eye-off',\n            type: this.loginPd ? 'password' : 'text',\n            rules: [\n              this.rules.required,\n              this.rules.password,\n            ],\n          },\n          on: {\n            'click:append': () => {\n              this.loginPd = !this.loginPd\n            },\n            keyup: (event: KeyboardEvent): void => {\n              if (event.key === 'Enter') {\n                this.login()\n              }\n              return undefined\n            },\n          },\n        }),\n      ])\n      return [title, input]\n    },\n    genRemember (h: CreateElement): VNode {\n      return h(ZRow, { props: { noGutters: true } }, [\n        h(ZCheckbox, {\n          attrs: {\n            tabIndex: -1,\n          },\n          props: {\n            value: this.remember,\n            dense: true,\n            label: 'Remember me',\n            tabIndex: -1,\n          },\n          on: {\n            input: (val: boolean) => {\n              this.remember = val\n            },\n          },\n        }),\n      ])\n    },\n    genText (h: CreateElement): VNode {\n      const form = h(ZForm, {\n        ref: 'loginForm',\n        props: {\n          lazyValidation: true,\n        },\n      }, [\n        // 用户名\n        ...this.genUsername(h),\n        ...this.genPassword(h),\n        this.genRemember(h),\n      ])\n      return h(ZCardText, [form])\n    },\n    genActions (h: CreateElement): VNode {\n      return h(ZCardActions, {\n        staticClass: 'pa-4',\n      }, [\n        h(ZRow, { props: { justify: 'end', noGutters: true } }, [\n          h(ZBtn, {\n            props: {\n              m: true,\n              color: '',\n              disabled: this.disabled,\n            },\n            on: {\n              click: (event: MouseEvent) => {\n                event.stopPropagation()\n                this.login()\n              },\n            },\n          }, [\n            'Sign in',\n          ]),\n        ]),\n      ])\n    },\n  },\n\n  render (h): VNode {\n    const card = h(ZCard, {\n      props: {\n        elevation: 5,\n        width: 300,\n      },\n      style: {\n        marginTop: '-10vh',\n      },\n    }, [\n      this.genTitle(h),\n      this.genSubTitle(h),\n      this.genText(h),\n      this.genActions(h),\n    ])\n    const row = h(ZRow, {\n      staticClass: 'z-default-login-body',\n      props: {\n        align: 'center',\n        justify: 'center',\n      },\n    }, [card])\n    return h(ZContainer, { staticClass: 'z-default-login' }, [row])\n  },\n})\n\nexport default ZDefaultLogin\n"],"sourceRoot":"","file":"ZDefaultLogin.js"}