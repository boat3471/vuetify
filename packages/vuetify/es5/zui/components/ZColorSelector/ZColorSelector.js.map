{"version":3,"sources":["../../../../src/zui/components/ZColorSelector/ZColorSelector.ts"],"names":[],"mappings":";;;;;;;AACA;;AACA;;AACA;;AACA;;;;eAIe,qBAAO,wCAAP,EAA4B,MAA5B,CAAmC;AAChD,EAAA,IAAI,EAAE,kBAD0C;AAEhD,EAAA,KAAK,EAAE;AACL,IAAA,MAAM,EAAE;AACN,MAAA,IAAI,EAAE,CAAC,MAAD,EAAS,MAAT,CADA;AAEN,MAAA,OAAO,EAAE;AAFH,KADH;AAKL,IAAA,KAAK,EAAE;AACL,MAAA,IAAI,EAAE,CAAC,MAAD,EAAS,MAAT,CADD;AAEL,MAAA,OAAO,EAAE;AAFJ,KALF;AASL,IAAA,KAAK,EAAE;AACL,MAAA,IAAI,EAAE,MADD;AAEL,MAAA,OAAO,EAAE;AAFJ,KATF;AAaL,IAAA,WAAW,EAAE;AACX,MAAA,IAAI,EAAE,OADK;AAEX,MAAA,OAAO,EAAE;AAFE;AAbR,GAFyC;AAqBhD,EAAA,IArBgD,kBAqB5C;AACF,QAAM,IAAI,GAAG,KAAK,cAAL,CAAoB,KAAK,KAAzB,CAAb;AACA,WAAO;AACL,MAAA,SAAS,EAAE,EADN;AAEL,MAAA,SAAS,EAAE,IAAI,CAAC,IAFX;AAGL,MAAA,QAAQ,EAAE,IAAI,CAAC,KAHV;AAIL,MAAA,WAAW,EAAE,EAJR;AAKL,MAAA,YAAY,EAAE,EALT;AAML,MAAA,aAAa,EAAE,KAAK,gBAAL,EANV;AAOL,MAAA,YAAY,EAAE,KAAK,oBAAL,EAPT;AAQL,MAAA,QAAQ,EAAE;AARL,KAAP;AAUD,GAjC+C;AAmChD,EAAA,QAAQ,EAAE,EAnCsC;AAqChD,EAAA,KAAK,EAAE;AACL,IAAA,KAAK,EAAE;AACL,MAAA,SAAS,EAAE,IADN;AAEL,MAAA,OAFK,mBAEI,KAFJ,EAES;AACZ,YAAM,QAAQ,GAAc,KAAK,QAAjC;;AACA,YAAI,QAAQ,KAAK,KAAK,KAAK,QAAQ,CAAC,IAAnB,IAA2B,KAAK,KAAK,QAAQ,CAAC,KAAnD,CAAZ,EAAuE;AACrE;AACD;;AACD,YAAM,IAAI,GAAG,KAAK,cAAL,CAAoB,KAApB,CAAb;AACA,aAAK,SAAL,GAAiB,IAAI,CAAC,IAAL,IAAa,EAA9B;AACA,aAAK,QAAL,GAAgB,IAAI,CAAC,KAArB;AACA,aAAK,QAAL,GAAgB,IAAhB;;AAEA,YAAI,CAAC,KAAK,YAAV,EAAwB;AACtB,eAAK,WAAL,GAAmB,IAAI,CAAC,IAAxB;AACA,eAAK,YAAL,GAAoB,IAAI,CAAC,KAAzB;AACD;AACF;AAhBI;AADF,GArCyC;AAyDhD,EAAA,OAzDgD,qBAyDzC;AACL,SAAK,KAAL,CAAW,OAAX,EAAoB;AAClB,MAAA,IAAI,EAAE,KAAK,SADO;AAElB,MAAA,KAAK,EAAE,KAAK;AAFM,KAApB;AAID,GA9D+C;AA+DhD,EAAA,OAAO,EAAE;AACP,IAAA,aADO,yBACQ,KADR,EACkB;AACvB,WAAK,SAAL,GAAiB,KAAjB;AACA,WAAK,QAAL,GAAgB,KAAK,CAAC,GAAtB;AACA,WAAK,SAAL,GAAiB,KAAK,CAAC,GAAvB;AACD,KALM;AAMP,IAAA,aANO,2BAMM;AACX,WAAK,eAAL;AACD,KARM;;AASP;AACA,IAAA,WAVO,yBAUI;AACT,WAAK,eAAL,CAAqB,KAAK,QAA1B;AACD,KAZM;;AAaP;AACA,IAAA,eAdO,6BAcQ;AAAA,UACL,SADK,GACmB,IADnB,CACL,SADK;AAAA,UACM,QADN,GACmB,IADnB,CACM,QADN;;AAEb,UAAI,QAAJ,EAAc;AACZ,aAAK,KAAL,CAAW,QAAX,EAAqB;AACnB,UAAA,IAAI,EAAE,SAAS,IAAI,QADA;AAEnB,UAAA,KAAK,EAAE,QAFY;AAGnB,UAAA,IAAI,EAAE,KAAK;AAHQ,SAArB;AAKD;AACF,KAvBM;;AAwBP;AACA,IAAA,YAzBO,wBAyBO,IAzBP,EAyBwB,SAzBxB,EAyB2C,UAzB3C,EAyB8D;AACnE,cAAQ,IAAR;AACE,aAAK,SAAL;AAAgB;AACd,eAAK,SAAL,GAAiB,UAAU,IAAI,EAA/B;AACA,eAAK,QAAL,GAAgB,UAAU,IAAI,EAA9B;AACA,eAAK,eAAL;AACA;;AACF,aAAK,OAAL;AAAc;AACZ,cAAI,CAAC,UAAL,EAAiB;AACf,YAAA,UAAU,GAAG,KAAK,oBAAL,CAA0B,SAA1B,CAAb;AACD;;AACD,eAAK,SAAL,GAAiB,SAAjB;AACA,eAAK,QAAL,GAAgB,UAAU,IAAI,EAA9B;AACA,eAAK,KAAL,CAAW,QAAX,EAAqB;AACnB,YAAA,IAAI,EAAE,SADa;AAEnB,YAAA,KAAK,EAAE,UAFY;AAGnB,YAAA,OAAO,EAAE;AAHU,WAArB;AAKA;;AACF,aAAK,SAAL;AAAgB;AACd,eAAK,SAAL,GAAiB,SAAjB;AACA,eAAK,QAAL,GAAgB,UAAU,IAAI,EAA9B;AACA,eAAK,eAAL;AACA;AAtBJ;AAwBD,KAlDM;AAmDP,IAAA,cAnDO,4BAmDO;AACZ,UAAM,IAAI,GAAc;AACtB,QAAA,KAAK,EAAE;AACL,UAAA,KAAK,EAAE,KAAK;AADP,SADe;AAItB,QAAA,EAAE,EAAE;AACF,0BAAgB,KAAK,aADnB;AAEF,0BAAgB,KAAK,aAFnB;AAGF,wBAAc,KAAK;AAHjB;AAJkB,OAAxB;AAUA,aAAO,KAAK,cAAL,CAAoB,wBAApB,EAAkC,IAAlC,EAAwC,CAAC,sBAAD,CAAxC,CAAP;AACD,KA/DM;AAgEP,IAAA,YAhEO,wBAgEO,SAhEP,EAgE0B,KAhE1B,EAgEyC,IAhEzC,EAgE0D,UAhE1D,EAgE6E;AAAA;;AAClF,UAAM,KAAK,GAAQ,EAAnB;;AACA,UAAI,IAAI,KAAK,OAAb,EAAsB;AACpB,QAAA,KAAK,CAAC,eAAN,GAAwB,SAAxB;AACD;;AAED,UAAI,SAAS,GAAG,aAAhB;;AACA,UAAI,SAAS,KAAK,aAAlB,EAAiC;AAC/B,QAAA,SAAS,GAAG,yBAAZ;AACD;;AAED,UAAM,IAAI,GAAc;AACtB,QAAA,WAAW,YAAK,SAAL,mBAAuB,IAAI,KAAK,OAAT,GAAmB,SAAnB,GAA+B,EAAtD,CADW;AAEtB,QAAA,KAAK,EAAE;AACL,UAAA,IAAI,EAAE,IADD;AAEL,UAAA,QAAQ,EAAE,IAFL;AAGL,UAAA,KAAK,EAAL;AAHK,SAFe;AAOtB,QAAA,KAAK,EAAL,KAPsB;AAQtB,QAAA,EAAE,EAAE;AACF,UAAA,KAAK,EAAE,iBAAK;AACV,oBAAQ,IAAR;AACE,mBAAK,SAAL;AACE,gBAAA,KAAI,CAAC,YAAL,CAAkB,IAAlB,EAAwB,SAAxB,EAAmC,SAAnC;;AACA;;AACF,mBAAK,OAAL;AACE,gBAAA,KAAI,CAAC,YAAL,CAAkB,IAAlB,EAAwB,SAAxB,EAAmC,UAAnC;;AACA;;AACF,mBAAK,SAAL;AACE;AARJ;AAUD;AAZC;AARkB,OAAxB;AAuBA,aAAO,KAAK,cAAL,CAAoB,iBAApB,EAA2B,IAA3B,CAAP;AACD,KAnGM;AAoGP,IAAA,oBApGO,kCAoGa;AAAA;;AAClB,UAAM,IAAI,GAAc;AACtB,QAAA,WAAW,EAAE;AADS,OAAxB;AAGA,aAAO,KAAK,cAAL,CAAoB,KAApB,EAA2B,IAA3B,EAAiC,CACtC,KAAK,WAAL,GAAmB,KAAK,YAAL,CAAkB,aAAlB,EAAiC,IAAjC,EAAuC,SAAvC,CAAnB,GAAuE,IADjC,EAEtC,KAAK,YAAL,CAAkB,SAAlB,EAA6B,IAA7B,EAAmC,SAAnC,CAFsC,EAGtC,KAAK,YAAL,CAAkB,SAAlB,EAA6B,IAA7B,EAAmC,SAAnC,CAHsC,EAItC,KAAK,YAAL,CAAkB,GAAlB,CAAsB,UAAA,CAAC;AAAA,eAAI,MAAI,CAAC,YAAL,CAAkB,CAAC,CAAC,IAApB,EAA0B,CAAC,CAAC,KAA5B,EAAmC,OAAnC,EAA4C,CAAC,CAAC,KAA9C,CAAJ;AAAA,OAAvB,CAJsC,CAAjC,CAAP;AAMD,KA9GM;AA+GP,IAAA,sBA/GO,oCA+Ge;AAAA;;AACpB,UAAM,IAAI,GAAc;AACtB,QAAA,WAAW,EAAE;AADS,OAAxB;AAGA,UAAM,KAAK,GAAG,KAAK,WAAL,IAAoB,KAAK,YAAvC;AACA,aAAO,KAAK,cAAL,CAAoB,KAApB,EAA2B,IAA3B,EAAiC,CACtC,KAAK,YAAL,CAAkB,KAAK,YAAvB,EAAqC,KAArC,EAA4C,SAA5C,CADsC,EAEtC,KAAK,aAAL,CAAmB,GAAnB,CAAuB,UAAA,CAAC,EAAG;AACzB,eAAO,MAAI,CAAC,YAAL,CAAkB,CAAlB,EAAqB,CAArB,EAAwB,SAAxB,CAAP;AACD,OAFD,CAFsC,CAAjC,CAAP;AAMD;AA1HM,GA/DuC;AA4LhD,EAAA,MA5LgD,kBA4LxC,CA5LwC,EA4LvC;AACP,WAAO,CAAC,CAAC,iBAAD,EAAQ;AACd,MAAA,WAAW,EAAE,uBADC;AAEd,MAAA,KAAK,EAAE,EAFO;AAGd,MAAA,KAAK,EAAE;AAHO,KAAR,EAIL,CACD,KAAK,cAAL,EADC,EAED,KAAK,oBAAL,EAFC,EAGD,KAAK,sBAAL,EAHC,CAJK,CAAR;AASD;AAtM+C,CAAnC,C","sourcesContent":["import { VNode, VNodeData } from 'vue'\nimport mixins from '../../../util/mixins'\nimport { ZColorSelectorMixin, ColorInfo } from '../../mixins/ZColorSelectorMixin'\nimport { ZColorPicker, ZCard } from '../../../components'\nimport './ZColorPicker.scss'\n\ntype ClickType = 'history' | 'theme' | 'initial'\n\nexport default mixins(ZColorSelectorMixin).extend({\n  name: 'z-color-selector',\n  props: {\n    height: {\n      type: [Number, String],\n      default: 20,\n    },\n    width: {\n      type: [Number, String],\n      default: 20,\n    },\n    value: {\n      type: String,\n      default: '',\n    },\n    transparent: {\n      type: Boolean,\n      default: false,\n    },\n  },\n\n  data () {\n    const info = this.getColorByName(this.value)\n    return {\n      colorData: {},\n      colorName: info.name,\n      colorHex: info.color,\n      initialName: '',\n      initialColor: '',\n      historyColors: this.getHistoryColors(),\n      themeOptions: this.getThemeColorOptions(),\n      lastInfo: {},\n    }\n  },\n\n  computed: {},\n\n  watch: {\n    value: {\n      immediate: true,\n      handler (value) {\n        const lastInfo: ColorInfo = this.lastInfo as ColorInfo\n        if (lastInfo && (value === lastInfo.name || value === lastInfo.color)) {\n          return\n        }\n        const info = this.getColorByName(value)\n        this.colorName = info.name || ''\n        this.colorHex = info.color\n        this.lastInfo = info\n\n        if (!this.initialColor) {\n          this.initialName = info.name\n          this.initialColor = info.color\n        }\n      },\n    },\n  },\n  mounted () {\n    this.$emit('ready', {\n      name: this.colorName,\n      color: this.colorHex,\n    })\n  },\n  methods: {\n    onUpdateColor (value: any) {\n      this.colorData = value\n      this.colorHex = value.hex\n      this.colorName = value.hex\n    },\n    onUpdateAfter () {\n      this.emitColorChange()\n    },\n    /** 点击圆盘记录历史颜色 */\n    onActionDot () {\n      this.addHistoryColor(this.colorHex)\n    },\n    /** 提交颜色 */\n    emitColorChange () {\n      const { colorName, colorHex } = this\n      if (colorHex) {\n        this.$emit('change', {\n          name: colorName || colorHex,\n          color: colorHex,\n          data: this.colorData,\n        })\n      }\n    },\n    /** 点击颜色 */\n    onClickColor (type: ClickType, colorName: string, colorValue?: string) {\n      switch (type) {\n        case 'history': // 点击历史颜色时\n          this.colorName = colorValue || ''\n          this.colorHex = colorValue || ''\n          this.emitColorChange()\n          break\n        case 'theme': // 点击主题颜色时\n          if (!colorValue) {\n            colorValue = this.getVuetifyThemeColor(colorName)\n          }\n          this.colorName = colorName\n          this.colorHex = colorValue || ''\n          this.$emit('change', {\n            name: colorName,\n            color: colorValue,\n            isTheme: true,\n          })\n          break\n        case 'initial': // 点击初始颜色\n          this.colorName = colorName\n          this.colorHex = colorValue || ''\n          this.emitColorChange()\n          break\n      }\n    },\n    genColorPicker (): VNode {\n      const data: VNodeData = {\n        props: {\n          value: this.colorHex,\n        },\n        on: {\n          'update:color': this.onUpdateColor,\n          'update:after': this.onUpdateAfter,\n          'action:dot': this.onActionDot,\n        },\n      }\n      return this.$createElement(ZColorPicker, data, ['genThemeColorContent'])\n    },\n    genColorCard (colorName: string, title: string, type: ClickType, colorValue?: string): VNode {\n      const style: any = {}\n      if (type !== 'theme') {\n        style.backgroundColor = colorName\n      }\n\n      let itemClass = 'color--item'\n      if (colorName === 'transparent') {\n        itemClass = 'color--item-transparent'\n      }\n\n      const data: VNodeData = {\n        staticClass: `${itemClass} mr-1 ${type === 'theme' ? colorName : ''}`,\n        props: {\n          flat: true,\n          outlined: true,\n          title,\n        },\n        style,\n        on: {\n          click: () => {\n            switch (type) {\n              case 'history' :\n                this.onClickColor(type, colorName, colorName)\n                break\n              case 'theme':\n                this.onClickColor(type, colorName, colorValue)\n                break\n              case 'initial' :\n                break\n            }\n          },\n        },\n      }\n      return this.$createElement(ZCard, data)\n    },\n    genThemeColorContent (): VNode {\n      const data: VNodeData = {\n        staticClass: 'theme-colors pb-2 px-3',\n      }\n      return this.$createElement('div', data, [\n        this.transparent ? this.genColorCard('transparent', '透明', 'history') : null,\n        this.genColorCard('#FFFFFF', '白色', 'history'),\n        this.genColorCard('#000000', '黑色', 'history'),\n        this.themeOptions.map(i => this.genColorCard(i.name, i.label, 'theme', i.color)),\n      ])\n    },\n    genHistoryColorContent (): VNode {\n      const data: VNodeData = {\n        staticClass: 'history-colors pb-4 px-3',\n      }\n      const title = this.initialName || this.initialColor\n      return this.$createElement('div', data, [\n        this.genColorCard(this.initialColor, title, 'history'),\n        this.historyColors.map(i => {\n          return this.genColorCard(i, i, 'history')\n        }),\n      ])\n    },\n  },\n\n  render (h): VNode {\n    return h(ZCard, {\n      staticClass: 'z-color-selector-card',\n      class: {},\n      props: {},\n    }, [\n      this.genColorPicker(),\n      this.genThemeColorContent(),\n      this.genHistoryColorContent(),\n    ])\n  },\n})\n"],"sourceRoot":"","file":"ZColorSelector.js"}