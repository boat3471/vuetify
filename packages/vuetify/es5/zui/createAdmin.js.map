{"version":3,"sources":["../../src/zui/createAdmin.ts"],"names":[],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AAGA;;AACA;;AACA;;;;;;;;;;AAEA;;;;;;AAMA,SAAS,UAAT,CAAqB,CAArB,EAAuC,OAAvC,EAAkE;AAChE,SAAO,CAAC,EACN;AACA,qBAFM,EAGN;AACE,IAAA,WAAW,kBAAW,OAAO,CAAC,QAAR,IAAoB,EAA/B,CADb;AAEE,IAAA,KAAK,EAAE;AACL,MAAA,EAAE,EAAE,OAAO,CAAC,KAAR,IAAiB;AADhB;AAFT,GAHM,EASN;AACA,GACE,OAAO,CAAC,OAAR,GAAkB,CAAC,CAAC,OAAO,CAAC,OAAT,CAAnB,GAAuC,IADzC,CAVM,CAAR;AAcD;AAED;;;;;;AAIM,SAAU,WAAV,CAAuB,OAAvB,EAAkD;AACtD,MAAI,CAAC,OAAL,EAAc;AACZ,IAAA,OAAO,GAAG,OAAO,IAAI,EAArB;AACD,GAHqD,CAItD;;;AACA,eAAI,GAAJ,CAAQ,kBAAR,EALsD,CAOtD;;;AACA,eAAI,GAAJ,CAAQ,qBAAR,EAAsB,OAAtB;;AARsD,8BAUZ,sBAAa,WAAb,EAVY;AAAA,MAU9C,KAV8C,yBAU9C,KAV8C;AAAA,MAUvC,OAVuC,yBAUvC,OAVuC;AAAA,MAU9B,MAV8B,yBAU9B,MAV8B;AAAA,MAUtB,KAVsB,yBAUtB,KAVsB,EAYtD;;;AACA,EAAA,KAAK,CAAC,OAAN,CAAc,OAAO,CAAC,IAAR,IAAgB,EAA9B,EAbsD,CAetD;;AACA,EAAA,KAAK,CAAC,YAAN,CAAmB,OAAO,CAAC,KAAR,IAAiB,EAApC,EAAwC,KAAxC,EAhBsD,CAkBtD;;AACA,MAAM,aAAa,GAAG,MAAM,CAAC,gBAAP,CAAwB,OAAO,CAAC,aAAhC,CAAtB;AACA,MAAM,EAAE,GAAG,0BAAU,aAAV,EAAyB,OAAO,CAAC,UAAjC,CAAX;;AACA,wBAAa,cAAb,CAA4B,EAAE,CAAC,SAA/B,EArBsD,CAuBtD;;;AACA,MAAM,gBAAgB,GAA0B,OAAO,CAAC,gBAAR,IAA4B,EAA5E;AACA,MAAI,MAAM,GAAG,gBAAgB,CAAC,MAA9B;;AACA,MAAI,CAAC,MAAL,EAAa;AACX,IAAA,MAAM,GAAG,OAAO,CAAC,OAAR,CAAgB,OAAO,CAAC,aAAR,IAAyB,EAAzC,EAA6C,OAAO,CAAC,KAAR,IAAiB,EAA9D,CAAT;AACD;;AACD,wBAAa,MAAb,GAAsB,MAAtB,CA7BsD,CA+BtD;;AACA,MAAM,UAAU;AACd,IAAA,EAAE,EAAE,OAAO,CAAC,KAAR,IAAiB,MADP;AAEd,IAAA,OAAO,EAAE,EAFK;AAGd,IAAA,OAHc,qBAGP,CACN,CAJa;AAKd,IAAA,MALc,kBAKN,CALM,EAKL;AACP,aAAO,UAAU,CAAC,CAAD,EAAI,OAAJ,CAAjB;AACD,KAPa;AAQd,IAAA,MAAM,EAAN;AARc,KASX,gBATW,CAAhB;;AAYA,wBAAa,IAAb,GAAoB,IAAI,YAAJ,CAAQ,UAAR,CAApB;AACA,SAAO,sBAAa,IAApB;AACD","sourcesContent":["import Vue, { ComponentOptions, CreateElement } from 'vue'\nimport VueRouter from 'vue-router'\nimport ZViewAdmin from './components/ZAdmin/ZViewAdmin'\nimport { CreateAdminOptions, Zui } from '../../types'\n\nimport { ZuiCoreClass } from './ZuiCore'\nimport { ZRouterClass } from './ZRouter'\nimport { createZui } from './createZui'\n\n/**\n * 创建主程序\n * @internal\n * @param h\n * @param options\n */\nfunction createMain (h: CreateElement, options: CreateAdminOptions) {\n  return h(\n    // 主视图, 及其选项\n    ZViewAdmin,\n    {\n      staticClass: `z-app ${options.appClass || ''}`,\n      props: {\n        id: options.appId || 'app',\n      },\n    },\n    // 子元素列表\n    [\n      options.appHome ? h(options.appHome) : null,\n    ]\n  )\n}\n\n/**\n * 创建Admin, 基于 @zwd/z-ui\n * @param options\n */\nexport function createAdmin (options: CreateAdminOptions): Vue {\n  if (!options) {\n    options = options || {}\n  }\n  // 安装 vue-router\n  Vue.use(VueRouter)\n\n  // 安装 zui-core\n  Vue.use(ZuiCoreClass, options)\n\n  const { $menu, $router, $theme, $auth } = ZuiCoreClass.genInstance()\n\n  // 设置认证\n  $auth.setting(options.auth || {})\n\n  // 设置菜单\n  $menu.settingMenus(options.menus || [], false)\n\n  // 设置 vuetify and zui\n  const presetOptions = $theme.getDefaultPreset(options.presetOptions)\n  const ui = createZui(presetOptions, options.useOptions)\n  ZuiCoreClass.settingVuetify(ui.framework)\n\n  // 设置路由管理器（Router）\n  const componentOptions: ComponentOptions<any> = options.componentOptions || {}\n  let router = componentOptions.router\n  if (!router) {\n    router = $router.setting(options.routerOptions || {}, options.menus || [])\n  }\n  ZRouterClass.router = router\n\n  // 生成 vue 选项\n  const vueOptions: ComponentOptions<any> = {\n    el: options.appId || '#app',\n    vuetify: ui as unknown as Zui,\n    mounted () {\n    },\n    render (h) {\n      return createMain(h, options)\n    },\n    router,\n    ...componentOptions,\n  }\n\n  ZuiCoreClass.$app = new Vue(vueOptions)\n  return ZuiCoreClass.$app\n}\n"],"sourceRoot":"","file":"createAdmin.js"}